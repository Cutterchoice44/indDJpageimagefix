<!DOCTYPE html>
<html lang="en" style="background: url('/images/bricks.png') center center / cover no-repeat fixed;">
<head>
  <meta charset="UTF-8" />
  <!-- Prevent caching so updates show immediately -->
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>DJ Profile – Cutters Choice Radio</title>

  <!-- Canonical + SEO -->
  <link rel="canonical" href="https://cutterschoiceradio.com/index_IND_DJ.html">
  <meta name="description" content="Explore a Cutters Choice Radio DJ profile, bio, socials, mixes, and next scheduled show.">
  <meta name="robots" content="index, follow">
  <meta name="theme-color" content="#5A8785">

  <!-- Social preview (Open Graph + Twitter) -->
  <meta property="og:type" content="profile">
  <meta property="og:title" content="DJ Profile – Cutters Choice Radio">
  <meta property="og:description" content="Bio, socials, mixes, and next scheduled show.">
  <meta property="og:url" content="https://cutterschoiceradio.com/index_IND_DJ.html">
  <meta property="og:site_name" content="Cutters Choice Radio">
  <meta property="og:image" content="https://cutterschoiceradio.com/images/logo.png">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="DJ Profile – Cutters Choice Radio">
  <meta name="twitter:description" content="Bio, socials, mixes, and next scheduled show.">
  <meta name="twitter:image" content="https://cutterschoiceradio.com/images/logo.png">

  <!-- Performance hints -->
  <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preconnect" href="https://app.radiocult.fm" crossorigin>

  <!-- Global styles (unchanged) -->
  <link rel="stylesheet" href="style.css?v=1748649274040" />
  <!-- Profile-specific styles (unchanged) -->
  <link rel="stylesheet" href="style-_IND_DJ.css?v=1748649274040" />

  <!-- Bebas Neue (for nav) -->
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap" rel="stylesheet" />
  <!-- FontAwesome link left in place (unused now); safe to keep -->
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    crossorigin="anonymous" referrerpolicy="no-referrer"
  />

  <!-- Organization JSON-LD (static) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Organization",
    "name": "Cutters Choice Radio",
    "url": "https://cutterschoiceradio.com",
    "logo": "https://cutterschoiceradio.com/images/logo.png",
    "sameAs": [
      "https://www.instagram.com/cutterschoiceradio",
      "https://www.facebook.com/cutterschoiceradio",
      "https://www.mixcloud.com/cutterschoiceradio",
      "https://tunein.com/radio/Cutters-Choice-Radio-s344746/"
    ]
  }
  </script>

  <!-- NAV: match main bar; remove socials; mobile-friendly -->
  <style>
    :root { --brand-teal:#5A8785; }

    /* NAV BAR — consistent with main bar; thin black lines; no socials */
    #main-nav{
      display:flex !important;
      align-items:center !important;
      width:100% !important;
      padding:.10rem .65rem !important;
      margin:0 !important;
      box-sizing:border-box !important;
      background-color:var(--brand-teal) !important;
      position:relative !important;
      z-index:1000 !important;
      border-top:2px solid #000 !important;
      border-bottom:2px solid #000 !important;
    }
    #main-nav::before,#main-nav::after{content:none !important;}

    /* Evenly spaced links occupy full width */
    #main-nav .nav-menu{
      display:flex !important;
      align-items:center !important;
      justify-content:space-evenly !important;
      gap:clamp(.25rem,2vw,1.5rem) !important;
      flex:1 1 auto !important;
      min-width:0 !important;
    }
    #main-nav a.nav-link{
      color:#fff !important;
      font-family:'Bebas Neue',sans-serif !important;
      font-size:2rem !important;
      text-transform:uppercase !important;
      text-decoration:none !important;
      white-space:nowrap !important;
    }

    /* Mobile: same bar, slightly smaller type */
    @media (max-width:768px){
      #main-nav a.nav-link{ font-size:1.6rem !important; }
    }
  </style>
</head>

<body>
  <!-- CONSISTENT NAV (Home • Our Story • Our DJs • DJ Selects • Merch) -->
  <nav id="main-nav" aria-label="Primary">
    <div class="nav-menu">
      <a class="nav-link" href="index.html">Home</a>
      <a class="nav-link" href="our-story.html">Our Story</a>
      <a class="nav-link" href="index-ourDJS.html">Our DJs</a>
      <a class="nav-link" href="dj-selects.html">DJ Selects</a>
      <a class="nav-link" href="merch.html">Merch</a>
    </div>
  </nav>

  <!-- REST OF YOUR DJ PROFILE CONTENT (unchanged) -->
  <div class="profile-wrapper">
    <div class="container">
      <!-- LEFT COLUMN: BIO -->
      <section class="bio-section" aria-labelledby="dj-name">
        <h1 id="dj-name">Loading…</h1>
        <div id="dj-bio">
          <p>Loading bio…</p>
        </div>
      </section>

      <!-- MIDDLE COLUMN: ARTWORK + SOCIALS + REMINDER -->
      <section class="column-mid" aria-label="Artwork and Socials">
        <div class="artwork-block">
          <img
            id="dj-artwork"
            src="https://i.imgur.com/qWOfxOS.png"
            alt="DJ Artwork Placeholder"
            loading="lazy"
            decoding="async"
          />
        </div>

        <div class="info-block">
          <div class="socials-section">
            <h2>Socials / Contact</h2>
            <ul id="social-links"></ul>
          </div>

          <div class="reminder-section">
            <h2>Get Reminded</h2>
            <div class="reminder-line"></div>
            <button id="calendar-btn" disabled>Add to Calendar</button>
          </div>
        </div>
      </section>

      <!-- RIGHT COLUMN: MIXES -->
      <section class="column-right mixes-section" aria-label="Mixes">
        <h2>Mixes</h2>
        <!-- Mixcloud iframes are injected by script_IND_DJ.js -->
        <div class="mixes-list" id="mixes-list"></div>

        <div class="mix-input">
          <input type="text" id="mixcloud-url-input" placeholder="Paste Mixcloud URL here…" />
          <button id="add-show-btn">Add Show</button>
        </div>
      </section>
    </div> <!-- /.container -->
  </div> <!-- /.profile-wrapper -->

  <!-- Profile script (reads ?id=, fetches data, populates page) -->
  <script src="script_IND_DJ.js?v=1748649274040" defer></script>

  <!-- JSON-LD injector: builds Person + next Event for this DJ (non-intrusive) -->
  <script>
  (function(){
    const params = new URLSearchParams(location.search);
    const artistId = params.get('id');
    if (!artistId) return;

    const BASE_URL   = 'https://api.radiocult.fm/api';
    const STATION_ID = 'cutters-choice-radio';
    const API_KEY    = 'pk_0b8abc6f834b444f949f727e88a728e0';
    const LISTEN_URL = 'https://cutterschoiceradio.com/listen';

    const headers = { 'x-api-key': API_KEY };

    async function fetchArtist() {
      // Try specific artist endpoint; fall back to list if needed.
      try {
        const r = await fetch(`${BASE_URL}/station/${STATION_ID}/artists/${artistId}`, { headers });
        if (r.ok) return await r.json();
      } catch(e){}
      try {
        const r = await fetch(`${BASE_URL}/station/${STATION_ID}/artists`, { headers });
        if (r.ok) {
          const data = await r.json();
          const hit = (data.artists || []).find(a => String(a.id) === String(artistId));
          return hit || null;
        }
      } catch(e){}
      return null;
    }

    async function fetchNextEvent() {
      try {
        const now = new Date().toISOString();
        const nextYear = new Date(Date.now() + 365*24*60*60*1000).toISOString();
        const r = await fetch(`${BASE_URL}/station/${STATION_ID}/artists/${artistId}/schedule?startDate=${now}&endDate=${nextYear}`, { headers });
        if (!r.ok) return null;
        const data = await r.json();
        return (data.schedules && data.schedules[0]) ? data.schedules[0] : null;
      } catch(e){ return null; }
    }

    function pickImage(artist) {
      const img = artist?.logo || {};
      return img['1024x1024'] || img['512x512'] || img['256x256'] || img.default || null;
    }

    (async () => {
      const artist = await fetchArtist();
      if (!artist) return;

      const next = await fetchNextEvent();
      const pageUrl = location.origin + location.pathname + location.search;

      const sameAs = [];
      const links = artist.links || artist.socials || artist.contacts || [];
      if (Array.isArray(links)) {
        for (const l of links) {
          const u = (typeof l === 'string') ? l : (l?.url || l?.href);
          if (u) sameAs.push(u);
        }
      }

      const person = {
        "@context": "https://schema.org",
        "@type": "Person",
        "name": artist.name || "Cutters Choice Radio DJ",
        "image": pickImage(artist),
        "url": pageUrl,
        "affiliation": { "@type": "Organization", "name": "Cutters Choice Radio", "url": "https://cutterschoiceradio.com" }
      };
      if (sameAs.length) person.sameAs = sameAs;

      const graph = [person];

      if (next && (next.startDateUtc || next.start || next.startDate)) {
        graph.push({
          "@type":"Event",
          "name": (next.title || "Show") + " — " + (artist.name || "DJ"),
          "startDate": next.startDateUtc || next.start || next.startDate,
          "eventAttendanceMode":"https://schema.org/OnlineEventAttendanceMode",
          "eventStatus":"https://schema.org/EventScheduled",
          "location": { "@type":"VirtualLocation", "url": LISTEN_URL },
          "organizer": { "@type":"Organization", "name":"Cutters Choice Radio", "url":"https://cutterschoiceradio.com" }
        });
      }

      const script = document.createElement('script');
      script.type = 'application/ld+json';
      script.textContent = JSON.stringify({ "@context":"https://schema.org", "@graph": graph });
      document.head.appendChild(script);
    })();
  })();
  </script>
</body>
</html>
