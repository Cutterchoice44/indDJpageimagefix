/* ─── RESET & BASE STYLES ─────────────────────────────────────────── */
*, *::before, *::after {
  margin:0;
  padding:0;
  box-sizing:border-box;
}

:root{
  --brand-teal:#5A8785;
  --bg-dark:#000;
  --text-light:#fafafa;

  /* Header sizing */
  --wave-height-desktop:200px;
  --wave-height-mobile:80px;

  /* Logo sizing */
  --logo-size-desktop:200px;
  --logo-size-mobile:100px;
}

html,body{
  height:100%;
  background:var(--bg-dark);
  color:var(--text-light);
  font-family:Arial,sans-serif;
  line-height:1.2;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}

/* ─── HEADER (desktop / large) ───────────────────────────────────── */
.header-banner{
  position:relative;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:clamp(8px,2vw,16px);
  background:#000;
  padding:clamp(12px,3vw,24px) 0;
  overflow:hidden;
  isolation:isolate;
  flex-wrap:nowrap;
}

.header-gif-right,
.header-gif-left{
  display:none !important;
  background:none !important;
}

.header-wave{
  flex:1 1 0;
  width:auto;
  min-width:100px;
  height:var(--wave-height-desktop);
  display:block;
  object-fit:cover;
  background:#000;
  border-top:2px solid #000;
  border-bottom:2px solid #000;
}

header .logo-container,
header .title{
  position:relative;
  z-index:1;
}

header .logo{
  height:var(--logo-size-desktop);
  width:var(--logo-size-desktop);
  max-width:var(--logo-size-desktop);
  aspect-ratio:1/1;
  margin-bottom:.3rem;
  margin-left:.7rem;
}

header .title{
  flex:0 1 auto;
  text-align:center;
  min-width:260px;
}
header .title h1{
  font-size:2rem;
  margin:0;
  font-family:'Bebas Neue',sans-serif;
}
header .title .tagline{
  font-size:1.2rem;
  color:var(--brand-teal);
  margin-top:0;
}

@media (max-width:768px){
  header .title{ min-width:180px; }
}

@media (prefers-reduced-motion:reduce){
  .header-wave{ display:none !important; }
  .header-banner{ justify-content:center; }
}

/* ─── NAVIGATION BAR (desktop / large) ───────────────────────────── */
#main-nav{
  position:relative;
  display:flex !important;
  justify-content:space-between !important;
  align-items:center !important;
  width:100% !important;
  padding:.25rem .75rem !important;
  background-color:var(--brand-teal) !important;
  border-top:2px solid #000 !important;
  border-bottom:2px solid #000 !important;
  z-index:1000 !important;
}

#main-nav .nav-menu{
  display:flex !important;
  align-items:center !important;
  justify-content:space-evenly !important;
  gap:clamp(.25rem,2vw,1.5rem) !important;
  flex:1 1 auto !important;
}

#main-nav a.nav-link,
#main-nav summary.nav-link{
  color:#fff !important;
  font-family:'Bebas Neue',sans-serif !important;
  font-size:2rem !important;
  text-transform:uppercase !important;
  text-decoration:none !important;
  white-space:nowrap !important;
  list-style:none !important;
  display:inline-flex;
  align-items:center;
  cursor:pointer;
}

.nav-details{ position:relative; }
.nav-details .about-panel{
  position:absolute;
  top:calc(100% + 8px);
  right:0;
  width:min(520px,86vw);
  background:#000;
  color:#fff;
  border:2px solid var(--brand-teal);
  border-radius:8px;
  padding:.75rem .9rem;
  line-height:1.35;
  box-shadow:0 8px 18px rgba(0,0,0,.45);
  display:none;
  z-index:1100;
}
.nav-details[open] .about-panel{ display:block; }
.nav-details > summary::-webkit-details-marker{ display:none; }
.nav-details > summary:focus{
  outline:2px solid #fff;
  outline-offset:2px;
}

#main-nav .nav-actions{
  display:flex !important;
  align-items:center !important;
  justify-content:flex-end !important;
  gap:.5rem !important;
}

#main-nav .social-icon,
#main-nav .icon-img{
  margin-left:.25rem !important;
  vertical-align:middle !important;
  width:2rem !important;
  height:auto !important;
  line-height:1 !important;
  text-decoration:none !important;
  color:#fff !important;
}

#main-nav .social-icon i{
  font-size:2.1rem !important;
}

#main-nav .nav-onemusic{
  display:flex;
  align-items:center;
  margin-left:.5rem;
}
#main-nav .nav-onemusic img{
  max-height:2rem;
  width:auto;
  height:auto;
  display:block;
}
@media (max-width:400px){
  #main-nav .nav-onemusic{ display:none; }
}

google-cast-button{
  --icon-color:#fff;
  width:1.5rem;
  height:1.5rem;
  margin-left:.5rem;
  vertical-align:middle;
  display:inline-block;
}
#manualCastBtn{
  display:none;
  background:none;
  border:none;
  color:#fff;
  font-size:1.8rem;
  cursor:pointer;
  margin-left:.25rem;
}

/* ─── GRID LAYOUT WRAPPER ────────────────────────────────────────── */
.grid-container{
  display:grid;
  grid-template-columns:1fr;
  gap:1rem;
  padding:.6rem;
}

/* ─── GENERIC SECTION SHELL ──────────────────────────────────────── */
section{
  background:#000;
  border:2px solid var(--brand-teal);
  border-radius:6px;
  padding:.5rem;
}
section h2{
  position:relative;
  margin-bottom:1rem;
  color:var(--brand-teal);
  text-align:center;
  padding-bottom:.6rem;
  font-family:'Bebas Neue',sans-serif;
  letter-spacing:.5px;
  text-transform:uppercase;
}
section h2::after{
  content:'';
  position:absolute;
  bottom:0;
  right:0;
  height:4px;
  background:var(--brand-teal);
  width:0;
  animation:drawLineReverse 2s ease-out forwards;
}
@keyframes drawLineReverse{
  to{ width:100%; }
}

/* ─── CHAT / CHAT POP OUT ────────────────────────────────────────── */
.chat iframe{
  width:100%;
  height:1200px;
  border:none;
  border-radius:4px;
  margin-top:.4rem;
}
.chat-actions{
  text-align:center;
}
.popout-btn{
  display:inline-block;
  margin:.5rem auto;
  padding:.5rem 2rem;
  font-size:1rem;
  background:var(--brand-teal);
  color:#fff;
  border:none;
  border-radius:4px;
  cursor:pointer;
}

/* ─── LIVE PLAYER + CCR TV ───────────────────────────────────────── */
.live-player{
  background:#000;
  border:2px solid var(--brand-teal);
  border-radius:6px;
  padding:.5rem;
  text-align:center;
}

.live-player iframe,
.live-player audio,
.live-player video{
  width:100%;
  height:300px;
  max-height:55vh;
  border:none;
  border-radius:4px;
  margin:0 auto 1rem;
  display:block;
}

/* outer wrapper around CCR TV */
.tv-wrapper{
  width:100%;
  max-width:1000px;
  margin:1rem auto 0;
  background:#000;
  border:2px solid var(--brand-teal);
  border-radius:6px;
  padding:.5rem;
}

/* actual CCR TV <video> element (class="ccr-tv-video") */
.ccr-tv-video{
  display:block;
  width:100%;
  max-width:100%;
  background:#000;
  object-fit:cover;
  aspect-ratio:16/9;
  max-height:600px;
  border-radius:4px;
  /* wrapper already has the teal border */
  border:0;
}

/* aspect-ratio fallback for ancient browsers */
@supports not (aspect-ratio: 16/9){
  .ccr-tv-video{
    height:auto;
    width:100%;
  }
}

/* text under radio player ("Loading archive show…") */
.player-container{
  max-width:1000px;
  margin:0 auto;
}
#now-archive{
  font-weight:bold;
  color:var(--brand-teal);
  font-size:1.5rem;
  margin:.3rem 0 1rem;
}

/* optional DJ artwork block (kept for legacy use) */
#now-art{
  width:100%;
  max-width:450px;
  height:auto;
  border-radius:8px;
  object-fit:contain;
  display:block;
  margin:1rem auto;
}

/* ─── MIXCLOUD ARCHIVE LIST ──────────────────────────────────────── */
.mixcloud{
  display:flex;
  flex-direction:column;
  overflow:hidden;
  padding:.5rem;
}
#mixcloud-list{
  flex:1;
  overflow-y:auto;
  max-height:1900px;
  padding-right:5px;
  scroll-behavior:smooth;
  margin-top:.4rem;
}
#mixcloud-list iframe{
  width:100%;
  height:120px;
  margin-bottom:.5rem;
  border:none;
}
.add-mixcloud{
  text-align:center;
  padding-top:.5rem;
}
.add-mixcloud input,
.add-mixcloud button{
  font-size:1rem;
}
.add-mixcloud input{
  width:80%;
  max-width:600px;
  padding:.5rem;
}
.add-mixcloud button{
  margin-top:.5rem;
  padding:.5rem 2rem;
  background:var(--brand-teal);
  color:#fff;
  border:none;
  border-radius:6px;
  cursor:pointer;
}

/* ─── WEEKLY SCHEDULE ───────────────────────────────────────────── */
.schedule{
  background:#111;
  border-radius:6px;
  padding:0 1rem 1rem;
  overflow-y:auto;
  font-size:1.4rem;
  line-height:1.4;
}
.schedule-heading{
  position:sticky;
  top:0;
  background:#111;
  z-index:10;
  padding:.4rem 0;
  font-size:1.5rem;
  border-bottom:.4px solid var(--brand-teal);
  font-family:'Bebas Neue',sans-serif;
  letter-spacing:.5px;
  text-transform:uppercase;
  text-align:center;
  color:var(--brand-teal);
}
#schedule-container h3,
#schedule-container .day-title{
  background:var(--brand-teal);
  color:#fff;
  padding:.4rem .6rem;
  border-radius:4px;
  margin:.6rem 0 .2rem;
  font-family:'Bebas Neue',sans-serif;
  letter-spacing:.5px;
}
#schedule-container h3 ~ *,
#schedule-container .day-title ~ *{
  border-top:2px solid var(--brand-teal);
  padding:.35rem .6rem;
}

/* ─── FOOTER BANNER ─────────────────────────────────────────────── */
.banner{
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:.5rem;
  background:var(--brand-teal);
  padding:1rem;
}
.banner a{
  flex:1;
  text-align:center;
  text-decoration:none;
  color:#000;
  font-weight:700;
  font-size:1.4rem;
  letter-spacing:.5px;
  text-transform:uppercase;
  padding:.5rem 1rem;
  font-family:'Bebas Neue',sans-serif;
}
.banner a:hover{ color:var(--text-light); }

/* ─── MIXCLOUD DELETE / ADMIN MODE ───────────────────────────────── */
.mixcloud-item{ position:relative; }
.remove-link{
  display:none !important;
  text-align:right;
  font-size:.9rem;
  color:var(--brand-teal);
  text-decoration:underline;
  margin-top:.3rem;
  cursor:pointer;
}
.admin-mode .remove-link{
  display:inline-block !important;
}

/* ─── DESKTOP-ONLY CHAT ACTION VISIBILITY ───────────────────────── */
@media only screen and (min-width:769px){
  section.chat .chat-actions{ display:none !important; }
}

/* ─── POP-OUT BUTTON VISIBILITY (mobile/desktop balance) ────────── */
@media (max-width:768px){
  section.chat .chat-actions{ display:none !important; }
  #chatPopupBtn{
    display:inline-block !important;
    margin:.5rem auto 1rem !important;
  }
}
@media (min-width:769px){
  section.chat .chat-actions{ display:block !important; }
  #chatPopupBtn{ display:none !important; }
}

/* ─── SCHEDULE PAGE heading color overrides ─────────────────────── */
.page-header h1,
.month-controls .title{
  color:#fff !important;
}
.week-grid .day-head,
.week-grid .day-head .dow,
.week-grid .day-head .date{
  color:#fff !important;
  opacity:1 !important;
  filter:none !important;
  mix-blend-mode:normal !important;
}

/* ─── MOBILE LAYOUT (≤768px) ────────────────────────────────────── */
@media (max-width:768px){

  /* Kill the WEBM waves for stability on old Safari/mobile Firefox */
  .header-wave{
    display:none !important;
  }

  /* Simple stacked header for phones:
     - one centered logo
     - title/tagline under it
  */
  .header-banner{
    display:flex !important;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    gap:6px;
    padding:8px 0 6px !important;
  }

  /* use the first logo only */
  .header-banner .logo-container:last-of-type{
    display:none !important;
  }

  header .logo{
    height:var(--logo-size-mobile) !important;
    width: var(--logo-size-mobile) !important;
    max-width:var(--logo-size-mobile) !important;
    margin:0 auto !important;
  }

  .header-banner .title{
    width:100%;
    margin-top:2px;
    text-align:center;
  }
  .header-banner .title h1{
    font-size:9.2vw;
    line-height:1;
    margin:0;
  }
  .header-banner .title .tagline{
    font-size:3.8vw;
    margin-top:4px;
    color:var(--brand-teal);
  }

  /* NAV: create two-row mobile nav below the main teal bar */
  #main-nav{
    position:relative !important;
    padding:.40rem .65rem .40rem !important;
    margin-bottom:46px; /* reserve space for row 2 strip */
  }

  #main-nav::before{
    content:"";
    position:absolute;
    top:100%;
    left:0;
    right:0;
    height:46px;
    background:var(--brand-teal);
    border-top:2px solid #000;
    border-bottom:2px solid #000;
  }

  /* Row 1: main links */
  #main-nav .nav-menu{
    flex-wrap:nowrap !important;
    justify-content:space-between !important;
    gap:.30rem !important;
    min-width:0 !important;
  }
  #main-nav a.nav-link,
  #main-nav summary.nav-link{
    font-size:.95rem !important;
    letter-spacing:.04em !important;
    padding:.1rem .2rem !important;
    white-space:nowrap !important;
  }

  /* ABOUT (row 2, left) */
  #about-overlay{
    position:absolute !important;
    left:.65rem;
    top:calc(100% + 8px);
    z-index:1002;
  }
  .nav-details > summary.nav-link{
    font-size:.9rem !important;
    padding:.35rem .55rem !important;
    background:rgba(0,0,0,.18);
    border:1px solid rgba(255,255,255,.28);
    border-radius:999px;
  }
  .nav-details .about-panel{
    left:0;
    right:auto;
    width:calc(100vw - 22px);
  }

  /* Social + CAST (row 2, right) */
  #main-nav .nav-actions{
    position:absolute !important;
    right:.65rem;
    top:calc(100% + 6px);
    gap:.75rem !important;
    z-index:1002;
  }
  #main-nav .social-icon i{
    font-size:1.35rem !important;
  }
  #main-nav .icon-img,
  #main-nav .nav-onemusic{
    display:none !important;
  }
  #manualCastBtn.nav-link{
    font-size:.95rem !important;
    padding:.28rem .5rem;
  }
  google-cast-button#castBtn{
    transform:scale(0.78);
    transform-origin:right center;
  }

  /* Page sections stacked in mobile order */
  .grid-container{
    display:flex;
    flex-direction:column;
    padding:0 .5rem;
  }
  .live-player{ order:1; }
  .chat{ order:2; }
  .schedule{ order:3; }
  .mixcloud{ display:none !important; } /* hide Mixcloud on phones */

  .chat iframe{
    height:70vh;
    max-height:70vh;
  }

  .schedule{
    overflow-y:auto;
  }
  #schedule-container{
    max-height:55vh;
    overflow-y:auto;
    padding-right:6px;
    scroll-behavior:smooth;
    -webkit-overflow-scrolling:touch;
  }
  #schedule-container h3,
  #schedule-container .day-title{
    position:sticky;
    top:0;
    z-index:2;
  }

  /* hide desktop-only "Pop Out Player" button */
  #popOutBtn{
    display:none;
  }

  /* footer shrink */
  .banner{
    padding:.35rem .55rem !important;
    gap:.25rem !important;
  }
  .banner a{
    font-size:1rem !important;
    padding:.3rem .5rem !important;
  }
  .banner span,
  .banner p{
    font-size:.72rem !important;
    line-height:1.15 !important;
  }
}

/* ─── DESKTOP / LARGE SCREEN LAYOUT OVERRIDES ────────────────────── */
@media (min-width:600px){
  .grid-container{
    grid-template-columns:1fr 1.5fr;
  }
  .banner{
    flex-direction:row;
    justify-content:space-between;
  }
}

@media (min-width:769px){
  .live-player iframe,
  .live-player audio,
  .live-player video{
    height:600px;
    max-height:150vh;
  }

  /* slideshow block if/when you bring it back */
  #slideshow{
    grid-column:1 / -1;
    width:100%;
    height:500px;
    transform:none;
    max-width:none;
    max-height:100vh;
    margin:0 auto;
    border:2px solid var(--brand-teal);
    box-sizing:border-box;
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
    gap:1rem;
  }
  #slideshow > *{
    height:100%;
  }

  .grid-container{
    grid-template-columns:1fr 1.5fr 1fr 1fr;
  }

  .chat iframe{
    height:1200px;
  }
}

@media (min-width:900px){
  header .title h1{
    font-size:8rem;
  }
  header .title .tagline{
    font-size:2.45rem;
  }
  header .logo{
    height:var(--logo-size-desktop);
    width:var(--logo-size-desktop);
    max-width:var(--logo-size-desktop);
  }
  #now-art{
    max-width:600px;
  }
}
